;; gorilla-repl.fileformat = 1

;; **
;;; # Geschichte gorilla example
;; **

;; @@
(ns wandering-sunset
  (:require [gorilla-repl.vega :as v]
            [geschichte-gorilla.core :as g]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(def test-repo
    {:causal-order {10 []
                    20 [10]
                    30 [20]
                    40 [20]
                    50 [40]
                    60 [30 50]
                    70 [60]
                    80 [30]
                    90 [80]
                    100 [70 140]
                    110 [100 160]
                    120 [90]
                    130 [30]
                    140 [130]
                    150 [50]
                    160 [150]
                    170 [110]
                    }
     :branches {"master" 170
                "fix" 160
                "dev" 120
                "fix-2" 140}})
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;wandering-sunset/test-repo</span>","value":"#'wandering-sunset/test-repo"}
;; <=

;; @@
(def test-repo-2
     {:causal-order {10 []
                     20 [10]
                     30 [20]
                     40 [20]
                     50 [40]
                     60 [30 50]
                     70 [60]
                     80 [30]
                     90 [80]
                     100 [70 140]
                     110 [100]
                     120 [90]
                     130 [30]
                     140 [130]}
      :branches {"master" 110
                 "fix" 50
                 "dev" 120
                 "fix-2" 140}})
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;wandering-sunset/test-repo-2</span>","value":"#'wandering-sunset/test-repo-2"}
;; <=

;; @@
(v/vega-view (g/commit-graph test-repo))
;; @@
;; =>
;;; {"type":"vega","content":{"data":[{"name":"nodes","values":[{"value":10,"x":77.5,"y":188.13968658447266,"r":61,"g":149,"b":188},{"value":20,"x":135,"y":188.13968658447266,"r":61,"g":149,"b":188},{"value":30,"x":192.5,"y":188.13968658447266,"r":61,"g":149,"b":188},{"value":60,"x":250,"y":188.13968658447266,"r":61,"g":149,"b":188},{"value":70,"x":307.5,"y":188.13968658447266,"r":61,"g":149,"b":188},{"value":100,"x":365,"y":188.13968658447266,"r":61,"g":149,"b":188},{"value":110,"x":422.5,"y":188.13968658447266,"r":61,"g":149,"b":188},{"value":170,"x":480,"y":188.13968658447266,"r":61,"g":149,"b":188},{"value":40,"x":192.5,"y":120.8838119506836,"r":40,"g":39,"b":160},{"value":50,"x":250,"y":120.8838119506836,"r":40,"g":39,"b":160},{"value":150,"x":307.5,"y":120.8838119506836,"r":40,"g":39,"b":160},{"value":160,"x":365,"y":120.8838119506836,"r":40,"g":39,"b":160},{"value":80,"x":288.3333333333333,"y":255.39556121826172,"r":87,"g":152,"b":53},{"value":90,"x":384.1666666666667,"y":255.39556121826172,"r":87,"g":152,"b":53},{"value":120,"x":480,"y":255.39556121826172,"r":87,"g":152,"b":53},{"value":130,"x":250,"y":53.62793731689453,"r":57,"g":106,"b":157},{"value":140,"x":307.5,"y":53.62793731689453,"r":57,"g":106,"b":157}]},{"name":"links","values":[{"path":"M 77.5 188.13968 L 135.0 188.13968"},{"path":"M 135.0 188.13968 L 192.5 188.13968"},{"path":"M 192.5 188.13968 L 250.0 188.13968"},{"path":"M 250.0 188.13968 L 307.5 188.13968"},{"path":"M 307.5 188.13968 L 365.0 188.13968"},{"path":"M 365.0 188.13968 L 422.5 188.13968"},{"path":"M 422.5 188.13968 L 480.0 188.13968"},{"path":"M 192.5 120.88381 L 250.0 120.88381"},{"path":"M 250.0 120.88381 L 307.5 120.88381"},{"path":"M 307.5 120.88381 L 365.0 120.88381"},{"path":"M 288.33334 255.39557 L 384.16666 255.39557"},{"path":"M 384.16666 255.39557 L 480.0 255.39557"},{"path":"M 250.0 53.627937 L 307.5 53.627937"},{"path":"M 192.5 188.13968 L 250.0 53.627937"},{"path":"M 192.5 188.13968 L 288.33334 255.39557"},{"path":"M 135.0 188.13968 L 192.5 120.88381"},{"path":"M 307.5 53.627937 L 365.0 188.13968"},{"path":"M 365.0 120.88381 L 422.5 188.13968"},{"path":"M 250.0 120.88381 L 250.0 188.13968"}]}],"marks":[{"properties":{"enter":{"path":{"field":"data.path"},"stroke":{"value":"grey"},"strokeWidth":{"value":1}}},"type":"path","from":{"data":"links"}},{"properties":{"update":{"stroke":["value","transparent"],"size":{"value":90},"shape":"circle"},"enter":{"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"},"x":{"field":"data.x"}}},"type":"symbol","from":{"data":"nodes"}}],"width":500,"height":309.02349853515625,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:data [{:name \"nodes\", :values [{:value 10, :x 155/2, :y 188.13968658447266, :r 61, :g 149, :b 188} {:value 20, :x 135N, :y 188.13968658447266, :r 61, :g 149, :b 188} {:value 30, :x 385/2, :y 188.13968658447266, :r 61, :g 149, :b 188} {:value 60, :x 250N, :y 188.13968658447266, :r 61, :g 149, :b 188} {:value 70, :x 615/2, :y 188.13968658447266, :r 61, :g 149, :b 188} {:value 100, :x 365N, :y 188.13968658447266, :r 61, :g 149, :b 188} {:value 110, :x 845/2, :y 188.13968658447266, :r 61, :g 149, :b 188} {:value 170, :x 480N, :y 188.13968658447266, :r 61, :g 149, :b 188} {:value 40, :x 385/2, :y 120.8838119506836, :r 40, :g 39, :b 160} {:value 50, :x 250N, :y 120.8838119506836, :r 40, :g 39, :b 160} {:value 150, :x 615/2, :y 120.8838119506836, :r 40, :g 39, :b 160} {:value 160, :x 365N, :y 120.8838119506836, :r 40, :g 39, :b 160} {:value 80, :x 865/3, :y 255.39556121826172, :r 87, :g 152, :b 53} {:value 90, :x 2305/6, :y 255.39556121826172, :r 87, :g 152, :b 53} {:value 120, :x 480N, :y 255.39556121826172, :r 87, :g 152, :b 53} {:value 130, :x 250N, :y 53.62793731689453, :r 57, :g 106, :b 157} {:value 140, :x 615/2, :y 53.62793731689453, :r 57, :g 106, :b 157}]} {:name \"links\", :values [{:path \"M 77.5 188.13968 L 135.0 188.13968\"} {:path \"M 135.0 188.13968 L 192.5 188.13968\"} {:path \"M 192.5 188.13968 L 250.0 188.13968\"} {:path \"M 250.0 188.13968 L 307.5 188.13968\"} {:path \"M 307.5 188.13968 L 365.0 188.13968\"} {:path \"M 365.0 188.13968 L 422.5 188.13968\"} {:path \"M 422.5 188.13968 L 480.0 188.13968\"} {:path \"M 192.5 120.88381 L 250.0 120.88381\"} {:path \"M 250.0 120.88381 L 307.5 120.88381\"} {:path \"M 307.5 120.88381 L 365.0 120.88381\"} {:path \"M 288.33334 255.39557 L 384.16666 255.39557\"} {:path \"M 384.16666 255.39557 L 480.0 255.39557\"} {:path \"M 250.0 53.627937 L 307.5 53.627937\"} {:path \"M 192.5 188.13968 L 250.0 53.627937\"} {:path \"M 192.5 188.13968 L 288.33334 255.39557\"} {:path \"M 135.0 188.13968 L 192.5 120.88381\"} {:path \"M 307.5 53.627937 L 365.0 188.13968\"} {:path \"M 365.0 120.88381 L 422.5 188.13968\"} {:path \"M 250.0 120.88381 L 250.0 188.13968\"}]}], :marks [{:properties {:enter {:path {:field \"data.path\"}, :stroke {:value \"grey\"}, :strokeWidth {:value 1}}}, :type \"path\", :from {:data \"links\"}} {:properties {:update {:stroke [:value \"transparent\"], :size {:value 90}, :shape \"circle\"}, :enter {:y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}, :x {:field \"data.x\"}}}, :type \"symbol\", :from {:data \"nodes\"}}], :width 500, :height 309.0235, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=
